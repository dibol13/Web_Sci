<!DOCTYPE html>
<meta charset="UTF-8">

  <link type="text/css" rel="stylesheet" href="lab1.css"/>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <title>Daniel Ben-Chitrit Lab 1</title>
  </head>
  <body onload="load_data()">
  <div id="container">
	    <div id="tweets">
	    <p> TWEETS: </p>

		    <div id="t1">
		    </div>

		    <div id="t2">
		    </div>

		    <div id="t3">
		    </div>

		    <div id="t4">
		    </div>

		    <div id="t5">
		    </div>
	    </div>

	    <div id="hashes">
	    <p>HASHTAGS:</p>

		    <div id="h1">
		    </div>

		    <div id="h2">
		    </div>

		    <div id="h3">
		    </div>

		    <div id="h4">
		    </div>

		    <div id="h5">
		    </div>
	    </div>
    </div>

    <script>
    function load_data(){

    var tweets = [];
    var hashes = [];

    $.ajax({ 
    	type: 'GET',
    	async: false,
    	url: 'tweets.json', 
    	data: { get_param: 'value' }, 
    	dataType: 'json',
    	success: function (data) { 
        	$.each(data, function(index, element) {
        		tweets.push(element.text);
                $.each(this.entities, function() {
                    $.each(this, function() {
                        if(this.text){
                            hashes.push(this.text);
                        }
                    });
                });
       		});
	    }
    });
    var i = 0, j = 0, l = tweets.length, h = hashes.length;
    setInterval(function(){
    	$("#t1").delay(100).fadeTo("slow", 1);
    	$("#t2").delay(250).fadeTo("slow", 1);
    	$("#t3").delay(400).fadeTo("slow", 1);
    	$("#t4").delay(550).fadeTo("slow", 1);
    	$("#t5").delay(700).fadeTo("slow", 1);
	    document.getElementById("t1").innerHTML = tweets[(i+4)%l];
	    document.getElementById("t2").innerHTML = tweets[(i+3)%l];
	    document.getElementById("t3").innerHTML = tweets[(i+2)%l];
		document.getElementById("t4").innerHTML = tweets[(i+1)%l];
		document.getElementById("t5").innerHTML = tweets[i%l];

		$("#h1").delay(100).fadeTo("slow", 1);
    	$("#h2").delay(175).fadeTo("slow", 1);
    	$("#h3").delay(250).fadeTo("slow", 1);
    	$("#h4").delay(325).fadeTo("slow", 1);
    	$("#h5").delay(400).fadeTo("slow", 1);
		document.getElementById("h1").innerHTML = hashes[(i+4)%h];
	    document.getElementById("h2").innerHTML = hashes[(i+3)%h];
	    document.getElementById("h3").innerHTML = hashes[(i+2)%h];
		document.getElementById("h4").innerHTML = hashes[(i+1)%h];
		document.getElementById("h5").innerHTML = hashes[i%h];
		$("#t1").delay(2000).fadeTo("slow", 0);
    	$("#t2").delay(2200).fadeTo("slow", 0);
    	$("#t3").delay(2400).fadeTo("slow", 0);
    	$("#t4").delay(2600).fadeTo("slow", 0);
    	$("#t5").delay(2800).fadeTo("slow", 0);

    	$("#h1").delay(2000).fadeTo("slow", 0);
    	$("#h2").delay(2075).fadeTo("slow", 0);
    	$("#h3").delay(2150).fadeTo("slow", 0);
    	$("#h4").delay(2225).fadeTo("slow", 0);
    	$("#h5").delay(2300).fadeTo("slow", 0);
	    i = i + 1;
		}, 5000);
};


    </script>

  </body>
</html>
